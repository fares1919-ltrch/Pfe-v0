<div class="dashboard-container">
  <!-- Top Bar -->
  <div class="top-bar">
    <div class="title-section">
      <mat-icon class="fingerprint-icon">fingerprint</mat-icon>
      <h2>CPF Dashboard</h2>
    </div>
    <button type="button" mat-raised-button color="warn" class="alert-btn">
      <mat-icon>warning</mat-icon>
      Fraud Alert
    </button>
  </div>

  <!-- CPF Status Card -->
  <div class="status-section">
    <div class="section-header">
      <h3>CPF Status</h3>
      <span class="last-update"
        >Updated:
        {{
          citizen?.fraudDetails?.detectionDate | date : "dd/MM/yyyy, HH:mm"
        }}</span
      >
    </div>

    <div class="status-card">
      <!-- Case Number Section -->
      <div class="cpf-number-section">
        <p class="label">Case Number</p>
        <p class="value fraud-value">{{ citizen?.fraudDetails?.caseNumber }}</p>
      </div>

      <!-- Status Badge -->
      <div class="status-badge blocked">
        <mat-icon>gpp_bad</mat-icon>
        <span>Fraud Detected</span>
      </div>

      <!-- Warning Message -->
      <div class="warning-message">
        <mat-icon>warning</mat-icon>
        <span>CPF generation has been suspended</span>
      </div>

      <!-- Action Button -->
      <button
        type="button"
        mat-stroked-button
        color="warn"
        class="action-btn"
        (click)="contestFraud()"
      >
        <mat-icon>gavel</mat-icon>
        Contest Fraud
      </button>
    </div>
  </div>

  <!-- Additional Information -->
  <div class="info-section">
    <div class="personal-info-card">
      <div class="card-content">
        <div class="user-info">
          <div class="profile-image">
            <img src="assets/images/134766992.png" alt="Profile photo" />
          </div>
          <div class="user-details">
            <p class="user-name">{{ citizen?.fullName }}</p>
            <p class="user-id">ID: {{ citizen?.identityNumber }}</p>
          </div>
        </div>

        <!-- Fraud Details -->
        <div class="fraud-details">
          <h4>Fraud Details</h4>
          <div class="details-grid">
            <div class="detail-item">
              <span class="label">Type:</span>
              <span class="value">{{
                citizen?.fraudDetails?.type | uppercase
              }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Status:</span>
              <span class="value">{{
                citizen?.fraudDetails?.status | uppercase
              }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Detection:</span>
              <span class="value">{{
                citizen?.fraudDetails?.detectionDate | date : "dd/MM/yyyy"
              }}</span>
            </div>
          </div>
        </div>

        <!-- Match Details -->
        <div class="match-details" *ngIf="citizen?.fraudDetails?.matchedWith">
          <h4>Match Details</h4>
          <div class="similarity-container">
            <div class="similarity-score">
              <div class="score-circle">
                {{ citizen?.fraudDetails?.matchedWith?.similarityScore }}%
              </div>
              <span>Similarity Score</span>
            </div>
            <div class="biometric-info">
              <span class="label">Biometric Match:</span>
              <span class="value">Fingerprints, Face</span>
            </div>
          </div>
        </div>

        <!-- Appointment Info -->
        <div class="appointment-info">
          <h4>Initial Appointment</h4>
          <p>
            <span class="label">Date:</span>
            {{ citizen?.appointment?.date | date : "dd/MM/yyyy" }}
          </p>
          <p>
            <span class="label">Location:</span>
            {{ citizen?.appointment?.location }}
          </p>
          <p>
            <span class="label">Officer:</span>
            {{ citizen?.appointment?.officerName }}
          </p>
        </div>

        <!-- View Details Button -->
        <button type="button" mat-stroked-button class="view-details-btn">
          <mat-icon>visibility</mat-icon>
          View Complete Details
        </button>
      </div>
    </div>
  </div>
</div>
