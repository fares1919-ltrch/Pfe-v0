<!-- Header -->
<header
  class="fixed top-0 w-full z-50 transition-all duration-300"
  [ngClass]="{
    'py-3 bg-[rgba(20,20,30,0.9)] backdrop-blur-md': !isScrolled,
    'py-2 bg-[rgba(20,20,30,0.95)] shadow-md backdrop-blur-md': isScrolled
  }"
>
  <div class="container mx-auto px-2 md:px-3">
    <div
      class="flex items-center justify-between"
      [ngClass]="{ 'py-1': isScrolled, 'py-2': !isScrolled }"
    >
      <!-- Logo -->
      <a href="#" class="flex items-center shrink-0">
        <img
          src="assets/images/logo.png"
          alt="Identity Secure Logo"
          class="transition-all duration-300 mr-2"
          [ngClass]="{ 'h-8 sm:h-10': !isScrolled, 'h-6 sm:h-8': isScrolled }"
        />
        <span
          class="font-bold text-white transition-all duration-300"
          [ngClass]="{
            'text-sm sm:text-base': !isScrolled,
            'text-xs sm:text-sm': isScrolled
          }"
          >Identity Secure</span
        >
      </a>

      <!-- Mobile Toggle Button -->
      <button
        class="lg:hidden text-white focus:outline-none relative z-50"
        (click)="toggleMobileMenu()"
        data-toggle="mobile-menu"
        aria-label="Toggle navigation"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>

      <!-- Navigation Menu -->
      <div
        class="hidden lg:flex lg:items-center lg:justify-center flex-1 mx-4"
        [ngClass]="{
          hidden: !isMobileMenuOpen,
          'block fixed top-16 left-0 right-0 bg-[rgba(20,20,30,0.95)] backdrop-blur-md p-4 shadow-lg z-40':
            isMobileMenuOpen
        }"
        data-dropdown="mobile-menu"
      >
        <ul
          class="flex flex-col lg:flex-row lg:items-center lg:justify-center space-y-2 lg:space-y-0 w-full mx-auto"
        >
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#hero"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-white hover:text-[#6b21a8]': !isActive('home'),
                'text-[#6b21a8]': isActive('home'),
                active: isActive('home')
              }"
              >Home</a
            >
          </li>
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#about"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-gray-300 hover:text-white': !isActive('about'),
                'text-[#6b21a8]': isActive('about'),
                active: isActive('about')
              }"
              >About</a
            >
          </li>
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#features"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-gray-300 hover:text-white': !isActive('features'),
                'text-[#6b21a8]': isActive('features'),
                active: isActive('features')
              }"
              >Features</a
            >
          </li>
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#guides"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-gray-300 hover:text-white': !isActive('guides'),
                'text-[#6b21a8]': isActive('guides'),
                active: isActive('guides')
              }"
              >Guides</a
            >
          </li>
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#faq"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-gray-300 hover:text-white': !isActive('faq'),
                'text-[#6b21a8]': isActive('faq'),
                active: isActive('faq')
              }"
              >FAQ</a
            >
          </li>
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#find-us"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-gray-300 hover:text-white': !isActive('find-us'),
                'text-[#6b21a8]': isActive('find-us'),
                active: isActive('find-us')
              }"
              >Find Us</a
            >
          </li>
          <li class="lg:mx-2 xl:mx-3">
            <a
              href="#contact"
              class="block py-2 relative nav-link inline-flex items-center"
              [ngClass]="{
                'text-gray-300 hover:text-white': !isActive('contact'),
                'text-[#6b21a8]': isActive('contact'),
                active: isActive('contact')
              }"
              >Contact</a
            >
          </li>
        </ul>
      </div>

      <!-- User Actions Container -->
      <div
        class="flex flex-col lg:flex-row items-center space-y-2 lg:space-y-0 lg:space-x-2 shrink-0"
      >
        <!-- Language Selector -->
        <div class="relative lg:mb-0 w-full lg:w-auto">
          <button
            (click)="toggleLanguageDropdown()"
            class="flex items-center justify-center w-full lg:w-auto px-2 py-1.5 border border-gray-600 rounded text-white hover:bg-[#6b21a8] transition text-sm"
            data-dropdown="language"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
              />
            </svg>
            <span class="hidden sm:inline">Language</span>
          </button>
          <div
            *ngIf="isLanguageDropdownOpen"
            class="absolute right-0 mt-2 py-2 w-48 bg-[rgba(20,20,30,0.95)] backdrop-blur-md rounded-md shadow-lg z-50"
          >
            <a href="#" class="block px-4 py-2 text-white hover:bg-[#6b21a8]"
              >English</a
            >
            <a href="#" class="block px-4 py-2 text-white hover:bg-[#6b21a8]"
              >Français</a
            >
            <a href="#" class="block px-4 py-2 text-white hover:bg-[#6b21a8]"
              >Português</a
            >
          </div>
        </div>

        <!-- Login/Signup Buttons -->
        <div class="flex flex-row w-full lg:w-auto space-x-2">
          <a
            (click)="handleLoginClick()"
            class="flex items-center justify-center w-full lg:w-auto px-2 py-1.5 border border-gray-600 rounded text-white hover:bg-[#6b21a8] transition text-sm cursor-pointer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"
              />
            </svg>
            <span class="hidden sm:inline">Login</span>
          </a>
          <a
            [routerLink]="['/auth/register']"
            class="flex items-center justify-center w-full lg:w-auto px-2 py-1.5 border border-gray-600 rounded text-white hover:bg-[#6b21a8] transition text-sm"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"
              />
            </svg>
            <span class="hidden sm:inline">Sign Up</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</header>
